<!DOCTYPE html>
<html lang="en">
	<head>
		<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
		<meta charset="utf-8" />
		<title>角色列表</title>
		<meta name="description" content="Restyling jQuery UI Widgets and Elements" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0" />
		<link rel="stylesheet" href="../assets/css/bootstrap.min.css" />
		<link rel="stylesheet" href="../assets/css/font-awesome.min.css" />
		<link rel="stylesheet" href="../assets/css/ace.min.css" id="main-ace-style" />
		<link rel="stylesheet" href="../assets/css/common/common.css" />
		<link rel="stylesheet" href="../assets/css/permissionManage/roleManage.css"/>
        <link rel="stylesheet" href="../assets/css/common/infoTable.css" />
		<link rel="stylesheet" href="../assets/ztree/zTreeStyle.css" />
	</head>
	<body class="no-skin">
	<!--loading flash-->
	<div class="spinner">
		<div class="rect1"></div>
		<div class="rect2"></div>
		<div class="rect3"></div>
		<div class="rect4"></div>
		<div class="rect5"></div>
	</div>

	<!-- /section:basics/navbar.layout -->
		<div class="main-container" id="main-container">
			<div class="main-content">
				<div class="page-content">

					<!-- /section:settings.box -->
					<div class="page-content-area">
						<div class="row">
							<div class="col-xs-12">

								<!-- PAGE CONTENT BEGINS -->

								<div class="admin-detail">角色列表</div>
								<ul class="admin-operate-items clearfix">
									<li class="admin-operate-item w0">
										<button id="addCategory" class="admin-btn w96">新增角色</button>
									</li>
									<li class="admin-operate-item w1"></li>

                                <table class="table table-bordered">
                                    <thead>
                                    <tr>
                                        <th class="order-topic center">角色名称</th>
										<th class="order-topic center">角色描述</th>
                                        <th class="order-topic center" style="min-width: 200px">操作</th>
                                    </tr>
                                    </thead>
                                    <tbody id="tbody">
                                    </tbody>
                                </table>

								</ul>  <!-- PAGE CONTENT ENDS -->
							</div><!-- /.col -->
						</div><!-- /.row -->
					</div><!-- /.page-content-area -->
				</div><!-- /.page-content -->
			</div><!-- /.main-content -->
		</div><!-- /.main-container -->


	<!--删除摸态窗-->
	<div class="modal fade" id="myModal2" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="myModalLabe2">确认</h4>
				</div>
				<div class="modal-body">
					<span>您确认要删除该角色吗？</span>
				</div>
				<div class="modal-footer">
					<!--<button type="button" class="btn btn-primary sure">确认</button>-->
					<!--<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>-->
					<div class="sure" id="delSure">确认</div>
					<div data-dismiss="modal" style="color: #0e90d2">取消</div>
				</div>
			</div>
		</div>
	</div>

    <!--增加角色摸态窗-->
    <div class="modal fade" id="approveModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="approveModalLabel">新增角色</h4>
                </div>
                <div class="modal-body">
                    <div>
                    <span class="modal-left">
                        角色名称：
                    </span>
                        <span class="modal-right"><input class="modal-right-input" id="name" type="text"></span>
                    </div>
					<div>
                    <span class="modal-left">
                        角色描述：
                    </span>
						<span class="modal-right"><input class="modal-right-input" id="desc" type="text"></span>
					</div>
					<div>
						<span class="modal-left">
                        菜单授权：
                    	</span>
						<span class="modal-right">
							<ul id="menuTree" class="ztree"></ul>
						</span>
					</div>
                </div>

                <div class="modal-footer">
                    <!--<button type="button" class="btn btn-primary sure">确认</button>-->
                    <!--<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>-->
                    <div class="sure" id="addSure">确认</div>
                    <div data-dismiss="modal" id="addCanel" style="color: #0e90d2">取消</div>
                </div>
            </div>
        </div>
    </div>

	<!--编辑角色摸态窗-->
	<div class="modal fade" id="approveModal1" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="approveModalLabel1">编辑</h4>
				</div>
				<div class="modal-body">
					<div>
                    <span class="modal-left">
                        角色名称：
                    </span>
						<span class="modal-right"><input class="modal-right-input" id="name1" type="text"></span>
					</div>
					<div>
                    <span class="modal-left">
                        角色描述：
                    </span>
						<span class="modal-right"><input class="modal-right-input" id="desc1" type="text"></span>
					</div>
					<div>
						<span class="modal-left">
                        菜单授权：
                    	</span>
						<span class="modal-right">
							<ul id="menuTreeEditor" class="ztree"></ul>
						</span>
					</div>
				</div>

				<div class="modal-footer">
					<!--<button type="button" class="btn btn-primary sure">确认</button>-->
					<!--<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>-->
					<div class="sure" id="editorSure">确认</div>
					<div data-dismiss="modal" id="editorCanel" style="color: #0e90d2">取消</div>
				</div>
			</div>
		</div>
	</div>
	<!--查看角色摸态窗-->
	<div class="modal fade" id="approveModal2" tabindex="-1" role="dialog">
		<div class="modal-dialog" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
					<h4 class="modal-title" id="approveModalLabel2">详情</h4>
				</div>
				<div class="modal-body">
					<div>
                    <span class="modal-left">
                        角色名称：
                    </span>
						<span id="roleName" class="modal-left"></span>
					</div>
					<div>
                    <span class="modal-left">
                        角色描述：
                    </span>
						<span id="roleDesc" class="modal-left"></span>
					</div>
					<div>
						<span class="modal-left">
                       拥有菜单：
                    	</span>
						<span class="modal-right">
							<ul id="checkMenuTree" class="ztree"></ul>
						</span>

					</div>
				</div>

					<div class="modal-footer">
						<!--<button type="button" class="btn btn-primary sure">确认</button>-->
						<!--<button type="button" class="btn btn-default" data-dismiss="modal">取消</button>-->
						<div data-dismiss="modal" id="checkCanel" style="color: #0e90d2">取消</div>
					</div>
				</div>
			</div>
		</div>
	</div>

	<script src="../assets/js/jquery.min.js"></script>
<script src="../assets/js/bootstrap.min.js"></script>
	<script  src="../assets/js/layer/layer.js"></script>
	<script  src="../assets/ztree/jquery.ztree.all-3.5.js"></script>
<script src="../assets/js/permissionManage/roleManage.js"></script>
	<!-- 导入ztree类库 -->
	<script type="text/javascript">
        // 授权树初始化
        var setting = {
            data : {
                key : {
                    title : "t"
                },
                simpleData : {
                    enable : true
                }
            },
            check : {
                enable : true,//让树形菜单前可以显示CheckBox
            }
        };

        var setting1 = {
            data : {
                key : {
                    title : "t"
                },
                simpleData : {
                    enable : true
                }
            },
            check : {
                enable : false,//让树形菜单前可以显示CheckBox
            }
        };

        $.ajax({
            url : '../role/findMenuByUser',
            type : 'POST',
            dataType : 'text',
            contentType: 'application/text; charset=utf-8',
            headers: {
                'Accept': 'application/json; charset=utf-8',
                'Authorization': 'Basic ' + sessionStorage.getItem('token')
            },
            success : function(res) {
                var zNodes = eval("(" + res + ")");
                $.fn.zTree.init($("#menuTree"), setting, zNodes);
                $.fn.zTree.init($("#menuTreeEditor"), setting, zNodes);
                var treeObj1 = $.fn.zTree.getZTreeObj("menuTree");
                var treeObj2= $.fn.zTree.getZTreeObj("menuTreeEditor");
                treeObj1.expandAll(true);
                treeObj2.expandAll(true);
            },
            error : function(msg) {
                alert('树加载异常!');
            }
        });

	</script>
	</body>
</html>
